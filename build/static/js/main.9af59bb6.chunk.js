(this.webpackJsonpsynth=this.webpackJsonpsynth||[]).push([[0],{34:function(e,t,s){"use strict";s.r(t);var n=s(2),c=s(1),r=s(18),a=s.n(r),o=s(6),i=s(3),l=s(5),j=s.n(l),u=s(10),b="https://strangers-things.herokuapp.com/api/2105-vpi-web-pt",h=s(0),p=function(e){var t=e.token,s=e.title,n=e.setTitle,c=e.description,r=e.setDescription,a=e.price,o=e.setPrice,l=e.location,p=e.setLocation,d=e.willDeliver,O=e.setWillDeliver,x=Object(i.g)(),m=function(){var e=Object(u.a)(j.a.mark((function e(i){var u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("1"),i.preventDefault(),e.prev=2,e.next=5,fetch("".concat(b,"/posts"),{method:"POST",headers:{"Content-Type":"Application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:{title:s,description:c,price:a,location:l,willDeliver:d}})});case 5:return u=e.sent,n(""),r(""),o(""),p(""),O(!1),e.next=13,u.json();case 13:e.sent,x.push("/posts"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("section",{className:"addNewPost",children:[Object(h.jsx)("h1",{children:"Add New Post"}),Object(h.jsxs)("form",{onSubmit:m,children:[Object(h.jsx)("input",{type:"text",name:"title",value:s,placeholder:"Title",onChange:function(e){return n(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"text",name:"description",value:c,placeholder:"Description",onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"text",name:"price",value:a,placeholder:"Price",onChange:function(e){return o(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"text",name:"location",value:l,placeholder:"Location",onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsxs)("label",{children:[Object(h.jsx)("input",{type:"checkbox",name:"willDeliver",value:d,onChange:function(e){return O(e.target.value)}}),"Willing to Deliver?"]}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"submit",children:"Create Post"})]})]})},d=function(){var e=Object(c.useState)(""),t=Object(n.a)(e,2),s=t[0],r=t[1],a=Object(c.useState)(""),o=Object(n.a)(a,2),l=o[0],b=o[1],p=Object(c.useState)(""),d=Object(n.a)(p,2),O=d[0],x=d[1],m=Object(c.useState)(!1),g=Object(n.a)(m,2),f=g[0],v=g[1],S="https://strangers-things.herokuapp.com/api/2105-vpi-web-pt",y=function(){var e=Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:s,password:l}})});case 2:return t=e.sent,console.log("".concat(S,"/users/register")),e.next=6,t.json();case 6:n=e.sent,console.log(n),r(""),b(""),v(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f?(alert("Profile created! Please log in!"),Object(h.jsx)(i.a,{to:"/login"})):Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l===O?y():alert("Password do not match, please try again")},children:[Object(h.jsxs)("fieldset",{children:[Object(h.jsx)("label",{htmlFor:"Username",children:"Create Username"}),Object(h.jsx)("input",{className:"CreateUsername",id:"username",type:"text",value:s,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("label",{htmlFor:"Password",children:"Create Password"}),Object(h.jsx)("input",{className:"CreatePassword",id:"password",type:"text",value:l,onChange:function(e){return b(e.target.value)}}),Object(h.jsx)("label",{htmlFor:"Confirm Password",children:"Confirm Password"}),Object(h.jsx)("input",{className:"CreatePassword",id:"confirmPassword",type:"text",value:O,onChange:function(e){return x(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{type:"submit",name:"event",children:" Create Profile"})]}),console.log("A")]})},O=function(e){var t=e.loginSuccess,s=e.setLoginSuccess;return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("section",{className:"title",children:Object(h.jsx)("h1",{children:" Stranger's Things "})}),Object(h.jsx)("section",{className:"links",children:Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:[" ",Object(h.jsx)(o.b,{to:"/posts",children:"Posts"})," "]}),Object(h.jsxs)("li",{children:[" ",t?Object(h.jsx)(o.b,{to:"/login",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("username"),s(!1)},children:"Logout"}):Object(h.jsx)(o.b,{to:"/login",children:"Login"})," "]}),Object(h.jsxs)("li",{children:[" ",t&&Object(h.jsx)(o.b,{to:"/profile",children:"Profile"})]})]})})})]})},x=function(e){var t=e.loginSuccess,s=e.setLoginSuccess;return!0===t?Object(h.jsx)(i.a,{to:"/profile"}):Object(h.jsxs)("section",{className:"login",children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt","/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:e.target[0].value,password:e.target[1].value}})}).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("token",e.data.token),s(!0)})).catch(console.error)},children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Username: "}),Object(h.jsx)("input",{type:"text"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Password: "}),Object(h.jsx)("input",{type:"text"})]}),Object(h.jsx)("button",{type:"submit",children:"Login"}),Object(h.jsx)(o.b,{className:"CreateProfile",to:"/createProfile",children:"Don't have an account? Sign Up!"})]})]})},m=function(e){var t=Object(c.useState)(""),s=Object(n.a)(t,2),r=s[0],a=s[1],o=e.token,i=e.postID,l=function(){var e=Object(u.a)(j.a.mark((function e(t){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("".concat(b,"/posts/").concat(i,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({message:{content:r}})});case 4:return s=e.sent,e.next=7,s.json();case 7:e.sent,a(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("fieldset",{className:"SendMessage",children:Object(h.jsxs)("form",{onSubmit:l,children:[Object(h.jsx)("label",{children:" Message: "}),Object(h.jsx)("input",{id:"messages",type:"text",name:"messages",value:r,onChange:function(e){return a(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{id:"SendMessageButton",type:"submit",name:"event",children:"Send Message"})]})})},g=function(e){var t=e.token,s=e.postid;return Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),fetch("".concat("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt","/posts/").concat(s),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){console.log(e),alert("post deleted!")})).catch(console.error)},children:Object(h.jsx)("div",{className:"Delete",children:Object(h.jsx)("button",{type:"submit",children:"Delete"})})})},f=function(e){var t=e.title,s=e.setTitle,n=e.description,c=e.setDescription,r=e.price,a=e.setPrice,o=e.location,i=e.setLocation,l="https://strangers-things.herokuapp.com/api/2105-vpi-web-pt";function b(){return(b=Object(u.a)(j.a.mark((function e(){var s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(l,"/posts/").concat(id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(token)},body:JSON.stringify({post:{title:t,description:n,price:r,location:o,willDeliver:!0}})});case 3:s=e.sent,c=s.json(),console.log(c),localStorage.getItem("token")&&posts.map((function(e){})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"EditPost",children:[Object(h.jsx)("h1",{children:"Edit Post"}),Object(h.jsxs)("form",{onSubmit:function(){return b.apply(this,arguments)},children:[Object(h.jsx)("label",{children:" Title: "}),Object(h.jsx)("input",{type:"text",name:"title",value:t,placeholder:t,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("label",{children:" Description: "}),Object(h.jsx)("input",{type:"text",name:"description",value:n,placeholder:n,onChange:function(e){return c(e.target.value)}}),Object(h.jsx)("label",{children:" Price: "}),Object(h.jsx)("input",{type:"text",name:"price",value:r,placeholder:r,onChange:function(e){return a(e.target.value)}}),Object(h.jsx)("label",{children:" Location: "}),Object(h.jsx)("input",{type:"text",name:"location",value:o,placeholder:o,onChange:function(e){return i(e.target.value)}}),Object(h.jsx)("button",{id:"EditPostButton",type:"submit",name:"event",children:"Edit Post"})]})]})},v=function(e){var t=e.loginSuccess,s=e.username,r=e.posts,a=e.setPosts,i=e.messages,l=e.setMessages,j=e.token,u=Object(c.useState)(""),b=Object(n.a)(u,2),p=b[0],d=b[1];fetch("".concat("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt","/posts")).then((function(e){return e.json()})).then((function(e){a(e.data.posts)}));var O=function(e,t){if(e.title.toLowerCase().includes(t.toLowerCase()))return!0},x=r.filter((function(e){return O(e,p)})),v=p.length>0?x:r;return Object(h.jsxs)("div",{className:"Posts",children:[Object(h.jsx)("h1",{children:" Posts"}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("input",{id:"filter",type:"text",placeholder:"search by title...",value:p,onChange:function(e){return d(e.target.value)}}),Object(h.jsx)("button",{type:"click",onClick:O,children:"Filter Posts"})]}),t?Object(h.jsx)("h3",{children:Object(h.jsxs)(o.b,{to:"/addpost",children:[" ",Object(h.jsx)("button",{children:" Add Posts"})]})}):null,r&&v.map((function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)("section",{className:"AllPosts",children:[Object(h.jsxs)("h1",{children:[" Title: ",e.title," "]}),Object(h.jsxs)("h2",{children:[" Description: ",e.description]}),Object(h.jsxs)("h3",{children:[" Price: ",e.price]}),Object(h.jsxs)("h4",{children:[" User: ",e.author.username]}),Object(h.jsxs)("h5",{children:[" Location: ",e.location]}),Object(h.jsxs)("h6",{children:[" Deliver: ",e.willDeliver?"Yes":"No"]}),t?Object(h.jsx)(m,{postID:e._id,messages:i,setMessages:l,token:j}):null,t&&e.author.username===s?Object(h.jsx)(g,{postid:e._id,token:j}):null,t&&e.author.username===s?Object(h.jsx)(f,{}):null]})},e._id)}))]})},S=(s(17),function(e){var t=e.setUsername,s=e.username,r=e.token,a=Object(c.useState)([]),o=Object(n.a)(a,2),i=o[0],l=o[1],j=Object(c.useState)([]),u=Object(n.a)(j,2),b=u[0],p=u[1];return Object(c.useEffect)((function(){fetch("".concat("https://strangers-things.herokuapp.com/api/2105-vpi-web-pt","/users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}}).then((function(e){return e.json()})).then((function(e){console.log(e),p(e.data.messages),l(e.data.messages),t(e.data.username)})).catch(console.error)}),[]),Object(h.jsxs)("div",{className:"Profile",children:[Object(h.jsx)("section",{className:"WelcomeUser",children:Object(h.jsxs)("h1",{children:["Welcome ",s," !"]})}),Object(h.jsxs)("section",{className:"MessageToMe",children:[Object(h.jsx)("h1",{children:"Message to You: "}),b.map((function(e){return Object(h.jsx)("ul",{className:"MessagesToUser",children:e.fromUser.username!==s?Object(h.jsxs)("li",{children:[' "',e.content,'"  -from:',e.fromUser.username]}):Object(h.jsx)("h2",{})},e._id)}))]}),Object(h.jsxs)("section",{className:"MessageFromMe",children:[Object(h.jsx)("h1",{children:"Message from You: "}),i.map((function(e){return Object(h.jsx)("ul",{className:"MessagesFromUser",children:e.fromUser.username===s?Object(h.jsxs)("li",{children:[' "',e.content,'" sent to post:',e.post.title," "]}):Object(h.jsx)("h2",{})},e._id)}))]})]})}),y=function(){var e=Object(c.useState)([]),t=Object(n.a)(e,2),s=t[0],r=t[1],a=Object(c.useState)(!1),l=Object(n.a)(a,2),j=l[0],u=l[1],b=Object(c.useState)(""),m=Object(n.a)(b,2),g=m[0],f=m[1],y=Object(c.useState)(""),P=Object(n.a)(y,2),w=P[0],k=P[1],C=Object(c.useState)(!1),N=Object(n.a)(C,2),D=N[0],T=N[1],U=Object(c.useState)(""),L=Object(n.a)(U,2),M=L[0],A=L[1],E=Object(c.useState)(""),F=Object(n.a)(E,2),I=F[0],B=F[1],J=Object(c.useState)(""),z=Object(n.a)(J,2),W=z[0],_=z[1],Y=Object(c.useState)(!1),H=Object(n.a)(Y,2),q=H[0],G=H[1],K=Object(c.useState)(""),Q=Object(n.a)(K,2),R=Q[0],V=Q[1],X=Object(c.useState)(""),Z=Object(n.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),se=Object(n.a)(te,2),ne=se[0],ce=se[1],re=Object(c.useState)([]),ae=Object(n.a)(re,2),oe=ae[0],ie=ae[1];return Object(c.useEffect)((function(){localStorage.getItem("token")&&(ee(localStorage.getItem("token")),u(!0))}),[j]),Object(h.jsx)("div",{className:"app",children:Object(h.jsx)(o.a,{children:Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{loginSuccess:j,setLoginSuccess:u}),Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/posts",children:Object(h.jsx)(v,{posts:s,setPosts:r,loginSuccess:j,title:M,setTitle:A,username:g,token:$})}),Object(h.jsx)(i.b,{path:"/addPost",children:Object(h.jsx)(p,{title:M,setTitle:A,price:I,setPrice:B,location:W,setLocation:_,willDeliver:q,setWillDeliver:G,description:R,setDescription:V,token:$,loginSuccess:j,setLoginSuccess:u})}),Object(h.jsx)(i.b,{path:"/login",children:Object(h.jsx)(x,{loginSuccess:j,setLoginSuccess:u,setUsername:f})}),Object(h.jsx)(i.b,{path:"/createProfile",children:Object(h.jsx)(d,{username:g,password:w,ConfirmPassword:D,setUsername:f,setPassword:k,setConfirmPassword:T})}),Object(h.jsx)(i.b,{path:"/profile",children:Object(h.jsx)(S,{messagesFromUser:ne,setMessagesFromUser:ce,messagesToUser:oe,setMessagesToUser:ie,username:g,setUsername:f,token:$})}),Object(h.jsx)(i.b,{path:"/",children:Object(h.jsx)(x,{loginSuccess:j,setLoginSuccess:u})}),Object(h.jsx)(i.b,{path:"*",children:Object(h.jsx)("h1",{children:"404 Error - Page Not Found!"})})]})]})})})};a.a.render(Object(h.jsx)(y,{}),document.getElementById("app"))}},[[34,1,2]]]);
//# sourceMappingURL=main.9af59bb6.chunk.js.map